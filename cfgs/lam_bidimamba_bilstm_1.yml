output:
  out_dir: ./checkpoints/htr/lam
  exp_name: lam_bidimamba_bilstm_1 #dataset_backbonetype_headtype_version
  use_wandb: false

dataset:
  name: LAM
  data_path: ./data/LAM/lines/
  train_data_list: ./data/LAM/train.ln
  val_data_list: ./data/LAM/val.ln
  test_data_list: ./data/LAM/test.ln
  nb_cls: 90

model:
  # One of: mamba, transformer, rwkv, hybrid, xlstm, bidimamba
  architecture: bidimamba
  # One of: linear, bilstm, bimamba, bidimamba
  head_type: bilstm
  # One of: single, double, quad
  mamba_scan_type: single
  # Optional boolean toggle used by some model compositions
  use_mamba: false
  # Image and patch sizes
  img_size: [512, 64]
  patch_size: [4, 32]
  proj: 8
  # Regularization
  attn_drop_rate: 0.0
  drop_path: 0.0
  # BiLSTM head params (when head_type=bilstm)
  bilstm_hidden_dim: 512
  bilstm_num_layers: 2
  bilstm_dropout: 0.1

optimizer:
  # AdamW + optional SAM
  initial_lr: 1.0e-7
  max_lr: 1.0e-5
  min_lr: 1.0e-5
  weight_decay: 0.5
  use_sam: false

training:
  total_iter: 100000
  warm_up_iter: 1000
  eval_iter: 1000
  print_iter: 100
  seed: 123
  ema_decay: 0.9999
  # masking / loss
  use_masking: true
  mask_version: 0
  mask_ratio: 0.4
  attn_mask_ratio: 0.1
  max_span_length: 8
  spacing: 0
  alpha: 1
  cos_temp: 8

dataloader:
  train_bs: 128
  val_bs: 8
  num_workers: 8

augmentation:
  # Global probability of applying augmentations
  proba: 0.5
  # DPI scaling
  dpi_min_factor: 0.5
  dpi_max_factor: 1.5
  # Perspective warp
  perspective_low: 0.0
  perspective_high: 0.4
  # Elastic distortion
  elastic_distortion_min_kernel_size: 3
  elastic_distortion_max_kernel_size: 3
  elastic_distortion_max_magnitude: 20
  elastic_distortion_min_alpha: 0.5
  elastic_distortion_max_alpha: 1.0
  elastic_distortion_min_sigma: 1
  elastic_distortion_max_sigma: 10
  # Morphology (dilation/erosion)
  dila_ero_max_kernel: 2
  dila_ero_iter: 1
  # Color jitter
  jitter_contrast: 0.4
  jitter_brightness: 0.4
  jitter_saturation: 0.4
  jitter_hue: 0.2
  # Blur
  blur_min_kernel: 3
  blur_max_kernel: 5
  blur_min_sigma: 3
  blur_max_sigma: 5
  # Sharpen
  sharpen_min_alpha: 0
  sharpen_max_alpha: 1
  sharpen_min_strength: 0
  sharpen_max_strength: 1
  # Zoom
  zoom_min_h: 0.8
  zoom_max_h: 1.0
  zoom_min_w: 0.99
  zoom_max_w: 1.0

pretrained:
  path: ""
